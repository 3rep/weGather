<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gather.we.dao.Manager10DAO">
	<select id="getAllManager10" resultType="com.gather.we.dto.Manager10DTO">
    SELECT stadium_info.stadium, stadium_info.location, rank_game.gametime, rank_game.g_status, rank_game.managerid, rank_game.manager
    FROM rank_game  
    JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
</select>
	
		
	
	
	
	<select id="totalRecord" resultType="int">
  SELECT COUNT(*) FROM (
    SELECT stadium_info.stadium, stadium_info.location, rank_game.gametime, rank_game.g_status
    FROM rank_game  
    JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
    <if test="searchWord!=null">
      AND ${searchKey} LIKE '%${searchWord}%'
    </if>
  ) total
</select>

<select id="pageSelect" resultType="com.gather.we.dto.Manager10DTO">
  SELECT * FROM (
    SELECT ROW_NUMBER() OVER(ORDER BY b.no DESC) AS rnum, 
           stadium_info.stadium, 
           stadium_info.location, 
           rank_game.gametime, 
           rank_game.g_status
    FROM rank_game  
    JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
    <if test="searchWord!=null">
      AND ${searchKey} LIKE '%${searchWord}%'
    </if>
  ) paging
  WHERE rnum BETWEEN #{startRecord} AND #{endRecord}
</select>
 </mapper> 
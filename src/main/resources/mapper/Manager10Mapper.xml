<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gather.we.dao.Manager10DAO">
	<select id="getAllManager10" resultType="com.gather.we.dto.Manager10DTO">
		SELECT stadium_info.stadium, stadium_info.location, rank_game.gametime, rank_game.g_status
	FROM rank_game  
	JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
	</select>
	
		
	
	
	
	<select id="totalRecord" resultType="int">
 		SELECT stadium_info.stadium, stadium_info.location, rank_game.gametime, rank_game.g_status
	FROM rank_game  
	JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
 		<if test="searchWord!=null">
 			and ${searchKey} like '%${searchWord}%'
 		</if>
 	</select>
 	<select id="pageSelect" resultType="com.gather.we.dto.Manager10DTO">
 		select * from 
 			(select * from 
 				(
 					SELECT stadium_info.stadium, stadium_info.location, rank_game.gametime, rank_game.g_status
	FROM rank_game  
	JOIN stadium_info ON stadium_info.st_no = rank_game.st_no
 					<if test="searchWord!=null"><!-- 검색어가 있을 경우 -->
 					 and #{searchKey} like '%${searchWord}%'
 					</if>
 					
 				
 				
 					order by b.no desc
 					
 			)
 		
 		 		
 		
 				 <![CDATA[
 				 where rownum<=${onePageRecord*nowPage} order by no asc 
 				 ]]>
 				 )
 		<choose>
		  <when test="nowPage!=totalPage"> 		
 	   		 	<![CDATA[
 			 	where rownum<=${onePageRecord} order by no desc
 			 	]]>
 		 
 		  </when>
 		  <when test="nowPage==totalPage">	
 			   <![CDATA[
 		 		where rownum<=${onePageRecord} order by no desc
 		 		]]>
 	  	  </when>
 		</choose> 
 	</select>
 </mapper> 